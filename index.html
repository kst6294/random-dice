<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }

        #settings {
            display: flex;
            align-items: flex-start;
            /* ìœ„ìª½ ì •ë ¬ */
            margin-bottom: 20px;
        }

        #dice-container {
            display: flex;
            flex-wrap: wrap;
            /* ì¤„ ë°”ê¿ˆ í—ˆìš© */
            justify-content: center;
            /* ì¤‘ì•™ ì •ë ¬ */
            margin-bottom: 20px;
            /* ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ë²„íŠ¼ê³¼ì˜ ê°„ê²© */
        }

        .dice-pair {
            display: flex;
            /* ê°€ë¡œ ì •ë ¬ */
            margin: 10px;
            /* ê°„ê²© ì„¤ì • */
        }

        .die {
            font-size: 2em;
            margin: 0 10px;
        }

        button {
            /* padding: 10px 20px; */
            font-size: 1em;
            cursor: pointer;
            margin-left: 10px;
            /* ë²„íŠ¼ê³¼ ì…ë ¥ ë°•ìŠ¤ ì‚¬ì´ì˜ ê°„ê²© */
        }

        .roll {
            animation: rollDice 1s;
        }

        @keyframes rollDice {
            0% {
                transform: rotate(0);
            }

            25% {
                transform: rotate(360deg);
            }

            50% {
                transform: rotate(720deg);
            }

            75% {
                transform: rotate(1080deg);
            }

            100% {
                transform: rotate(1440deg);
            }
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
        }

        /* ì…ë ¥ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        #diceCount {
            width: 30px;
            /* ì…ë ¥ ë°•ìŠ¤ ë„ˆë¹„ ì„¤ì • */
            height: 40px;
            /* ì…ë ¥ ë°•ìŠ¤ ë†’ì´ ì„¤ì • */
            font-size: 1em;
            /* í°íŠ¸ í¬ê¸° ì„¤ì • */
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #setButton {
            width: 60px;
            /* ë²„íŠ¼ê³¼ ë™ì¼í•œ ë„ˆë¹„ */
            height: 46px;
            /* ë²„íŠ¼ê³¼ ë™ì¼í•œ ë†’ì´ */
        }

        label {
            margin: 10px;
            /* ìƒí•˜ì¢Œìš° ì—¬ë°±ì„ ë™ì¼í•˜ê²Œ ì„¤ì • */
        }
    </style>
</head>

<body>
    <div id="settings">
        <label for="diceCount">ì£¼ì‚¬ìœ„ ê°œìˆ˜:</label>
        <input type="number" id="diceCount" value="2" min="1" max="4" oninput="validateDiceCount()">
        <button id="setButton" onclick="updateDice()">ì„¤ì •</button>
    </div>

    <div id="dice-container"></div>

    <div>
        <button id="rollButton" onclick="rollDice()">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2>ë”ë¸”!</h2>
            <button onclick="closeModal()">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        let rolling = false; // ì£¼ì‚¬ìœ„ë¥¼ êµ´ë¦¬ê³  ìˆëŠ”ì§€ ì—¬ë¶€

        let currentDiceCount = 2; // ê¸°ë³¸ê°’ ì„¤ì •

        function updateDice() {
            const diceContainer = document.getElementById('dice-container');
            currentDiceCount = parseInt(document.getElementById('diceCount').value); // í˜„ì¬ ì£¼ì‚¬ìœ„ ê°œìˆ˜ ì €ì¥

            // ê¸°ì¡´ ì£¼ì‚¬ìœ„ ì œê±°
            diceContainer.innerHTML = '';

            // ì£¼ì‚¬ìœ„ ìƒì„±
            for (let i = 0; i < currentDiceCount; i++) {
                const diceDiv = document.createElement('div');
                diceDiv.classList.add('die');
                diceDiv.innerText = 'ğŸ²'; // ì£¼ì‚¬ìœ„ ê·¸ë¦¼
                const numberDiv = document.createElement('div');
                numberDiv.classList.add('die');
                numberDiv.innerText = '0'; // ì´ˆê¸° ìˆ«ì
                if (i % 2 === 0) {
                    const dicePairDiv = document.createElement('div');
                    dicePairDiv.classList.add('dice-pair');
                    diceContainer.appendChild(dicePairDiv);
                }
                const lastPair = diceContainer.lastChild;
                lastPair.appendChild(diceDiv);
                lastPair.appendChild(numberDiv);
            }
        }

        function rollDice() {
            if (rolling) return; // ì´ë¯¸ êµ´ë¦¬ê³  ìˆë‹¤ë©´ í•¨ìˆ˜ ì¢…ë£Œ

            rolling = true; // êµ´ë¦¬ê¸° ì‹œì‘
            const rollButton = document.getElementById('rollButton');
            rollButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”

            const diceElements = document.querySelectorAll('.die');
            let diceValues = [];

            // ê°ê°ì˜ ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
            for (let i = 0; i < diceElements.length; i += 2) {
                const die = diceElements[i]; // ì£¼ì‚¬ìœ„ ê·¸ë¦¼
                const numberDisplay = diceElements[i + 1]; // ìˆ«ì í‘œì‹œ

                // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì¶”ê°€
                die.classList.add('roll');

                // ëœë¤ ìˆ«ì ìƒì„±
                const diceValue = Math.floor(Math.random() * 6) + 1;
                diceValues.push(diceValue); // ìˆ«ì ì €ì¥

                // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ í´ë˜ìŠ¤ ì œê±° ë° ê²°ê³¼ ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    die.classList.remove('roll');
                    numberDisplay.innerText = `${diceValue}`; // ìˆ«ì í‘œì‹œ
                }, 1000); // ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ê³¼ ì¼ì¹˜
            }

            // ë”ë¸” ì²´í¬
            setTimeout(() => {
                if (currentDiceCount === 2) { // ì£¼ì‚¬ìœ„ê°€ 2ê°œì¼ ë•Œë§Œ ì²´í¬
                    const uniqueValues = [...new Set(diceValues)]; // ì¤‘ë³µ ì œê±°
                    if (uniqueValues.length === 1) { // ëª¨ë“  ì£¼ì‚¬ìœ„ê°€ ê°™ì€ ìˆ«ìì¸ì§€ í™•ì¸
                        showModal(); // ëª¨ë‹¬ í‘œì‹œ
                    }
                }
                rolling = false; // êµ´ë¦¬ê¸° ì™„ë£Œ
                rollButton.disabled = false; // ë²„íŠ¼ í™œì„±í™”
            }, 1200); // ìˆ«ì í‘œì‹œ í›„ ì²´í¬
        }


        // ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜
        function showModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'flex'; // ëª¨ë‹¬ì„ flexë¡œ ì„¤ì •í•˜ì—¬ ë³´ì´ê²Œ í•¨
        }

        // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none'; // ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
        }
        // ê°œìˆ˜ ê²€ì¦
        function validateDiceCount() {
            const diceCountInput = document.getElementById('diceCount');
            const minCount = parseInt(diceCountInput.min);
            const maxCount = parseInt(diceCountInput.max);
            let value = parseInt(diceCountInput.value);

            // ì…ë ¥ê°’ì´ ìµœì†Œê°’ë³´ë‹¤ ì‘ìœ¼ë©´ ìµœì†Œê°’ìœ¼ë¡œ ì„¤ì •
            if (value < minCount) {
                diceCountInput.value = minCount;
            }
            // ì…ë ¥ê°’ì´ ìµœëŒ€ê°’ì„ ì´ˆê³¼í•˜ë©´ ìµœëŒ€ê°’ìœ¼ë¡œ ì„¤ì •
            else if (value > maxCount) {
                diceCountInput.value = maxCount;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ ì£¼ì‚¬ìœ„ ì„¤ì •
        window.onload = updateDice;
    </script>
</body>

</html>